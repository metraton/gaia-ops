{
  "system_prompt": "You are part of an intelligent DevOps agent system. Use specialized agents via the Task tool for complex operations. Development mode with tiered security: read operations allowed, destructive operations require approval, highly destructive operations blocked.",

  "hooks": {
    "PreToolUse": [
      {
        "matcher": "BashTool",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/pre_tool_use.py"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "BashTool",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/post_tool_use.py"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/subagent_stop.py"
          }
        ]
      }
    ]
  },

  "permissions": {
    "allow": [
      "Read",
      "Glob",
      "Grep",
      "Task",
      "SlashCommand",
      "Skill",
      "TodoWrite",
      "AskUserQuestion",
      "ExitPlanMode",
      "BashOutput",
      "KillShell",
      "mcp__ide__getDiagnostics",
      "mcp__ide__executeCode",
      "WebSearch",
      "WebFetch",
      "Bash(kubectl get:*)",
      "Bash(kubectl describe:*)",
      "Bash(kubectl logs:*)",
      "Bash(kubectl explain:*)",
      "Bash(kubectl version:*)",
      "Bash(kubectl config:*)",
      "Bash(kubectl top:*)",
      "Bash(kubectl wait:*)",
      "Bash(kubectl run:*)",
      "Bash(flux check:*)",
      "Bash(flux get:*)",
      "Bash(flux version:*)",
      "Bash(helm list:*)",
      "Bash(helm status:*)",
      "Bash(helm version:*)",
      "Bash(helm template:*)",
      "Bash(helm lint:*)",
      "Bash(git status:*)",
      "Bash(git log:*)",
      "Bash(git diff:*)",
      "Bash(git show:*)",
      "Bash(git branch:*)",
      "Bash(git init:*)",
      "Bash(gcloud version:*)",
      "Bash(gcloud config:*)",
      "Bash(gcloud auth:*)",
      "Bash(gcloud projects list:*)",
      "Bash(gcloud container clusters get-credentials:*)",
      "Bash(gcloud container clusters describe:*)",
      "Bash(gcloud container clusters list:*)",
      "Bash(gcloud sql instances describe:*)",
      "Bash(gcloud sql instances list:*)",
      "Bash(gcloud builds submit:*)",
      "Bash(terraform version:*)",
      "Bash(terraform fmt:*)",
      "Bash(terraform validate:*)",
      "Bash(terraform show:*)",
      "Bash(terraform output:*)",
      "Bash(ls:*)",
      "Bash(pwd:*)",
      "Bash(cd:*)",
      "Bash(cat:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(grep:*)",
      "Bash(find:*)",
      "Bash(which:*)",
      "Bash(echo:*)",
      "Bash(printf:*)",
      "Bash(python3:*)",
      "Bash(node:*)",
      "Bash(npm:*)",
      "Bash(sudo service docker status:*)",
      "Bash(docker info:*)",
      "Bash(curl:*)",
      "Bash(sed:*)"
    ],
    "deny": [
      "Bash(gcloud container clusters delete:*)",
      "Bash(gcloud sql instances delete:*)",
      "Bash(gcloud projects delete:*)",
      "Bash(gcloud compute instances delete:*)",
      "Bash(gcloud services disable:*)",
      "Bash(kubectl drain:*)",
      "Bash(kubectl cordon:*)",
      "Bash(kubectl uncordon:*)",
      "Bash(terraform destroy:*)",
      "Bash(terragrunt destroy:*)",
      "Bash(dd:*)",
      "Bash(mkfs:*)",
      "Bash(fdisk:*)"
    ],
    "ask": [
      "Edit",
      "Write",
      "NotebookEdit",
      "Bash(kubectl delete:*)",
      "Bash(kubectl rollout:*)",
      "Bash(kubectl scale:*)",
      "Bash(kubectl patch:*)",
      "Bash(kubectl create:*)",
      "Bash(kubectl apply:*)",
      "Bash(kubectl replace:*)",
      "Bash(kubectl exec:*)",
      "Bash(flux delete:*)",
      "Bash(flux reconcile:*)",
      "Bash(flux create:*)",
      "Bash(flux suspend:*)",
      "Bash(flux resume:*)",
      "Bash(helm install:*)",
      "Bash(helm upgrade:*)",
      "Bash(helm uninstall:*)",
      "Bash(helm delete:*)",
      "Bash(helm rollback:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git merge:*)",
      "Bash(git rebase:*)",
      "Bash(git cherry-pick:*)",
      "Bash(git add:*)",
      "Bash(terraform plan:*)",
      "Bash(terraform apply:*)",
      "Bash(terragrunt plan:*)",
      "Bash(terragrunt apply:*)",
      "Bash(rm:*)",
      "Bash(rmdir:*)",
      "Bash(mv:*)",
      "Bash(cp:*)",
      "Bash(chmod:*)",
      "Bash(chown:*)"
    ]
  },

  "security": {
    "default_tier": "T0",
    "tier_definitions": {
      "T0": {
        "name": "Read Only",
        "description": "Query and information commands allowed without approval",
        "blocked": false
      },
      "T1": {
        "name": "Validation",
        "description": "Validation and planning operations allowed without approval",
        "blocked": false
      },
      "T2": {
        "name": "Destructive - Ask",
        "description": "Destructive operations require user approval",
        "blocked": false
      },
      "T3": {
        "name": "Highly Destructive - Blocked",
        "description": "Highly destructive operations blocked automatically",
        "blocked": true
      }
    },
    "always_blocked": [
      "gcloud container clusters delete",
      "gcloud sql instances delete",
      "gcloud projects delete",
      "terraform destroy",
      "terragrunt destroy",
      "git push.*--force",
      "git push.*-f ",
      "git reset.*--hard",
      "kubectl drain",
      "rm -rf /",
      "dd if=",
      "mkfs\\.",
      "fdisk"
    ]
  },

  "environment": {
    "mode": "development"
  }
}
