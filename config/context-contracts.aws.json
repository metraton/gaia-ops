{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "version": "2.0.0",
  "cloud_provider": "aws",
  "description": "Context contracts for AWS-based projects",
  "last_updated": "2025-11-10",

  "agents": {
    "terraform-architect": {
      "contract_version": "1.0",
      "required": [
        "project_details.account_id",
        "project_details.region",
        "project_details.environment",
        "terraform_infrastructure.layout.base_path",
        "terraform_infrastructure.provider_credentials.aws",
        "operational_guidelines.commit_standards"
      ],
      "optional": [
        "terraform_infrastructure.layout.modules_path",
        "terraform_infrastructure.layout.environments_path",
        "terraform_infrastructure.state.backend_type",
        "terraform_infrastructure.state.backend_config"
      ]
    },

    "gitops-operator": {
      "contract_version": "1.0",
      "required": [
        "project_details.account_id",
        "project_details.region",
        "project_details.cluster_name",
        "gitops_configuration.repository.path",
        "gitops_configuration.flux_details",
        "cluster_details.namespaces",
        "operational_guidelines.commit_standards"
      ],
      "optional": [
        "gitops_configuration.repository.remote_url",
        "gitops_configuration.repository.branch",
        "cluster_details.ingress_class",
        "cluster_details.irsa_enabled",
        "application_services"
      ]
    },

    "aws-troubleshooter": {
      "contract_version": "1.0",
      "required": [
        "project_details.account_id",
        "project_details.region",
        "terraform_infrastructure.layout.base_path",
        "gitops_configuration.repository.path"
      ],
      "optional": [
        "project_details.cluster_name",
        "application_services",
        "infrastructure_topology"
      ]
    },

    "devops-developer": {
      "contract_version": "1.0",
      "required": [
        "project_details.account_id",
        "project_details.environment",
        "operational_guidelines.commit_standards"
      ],
      "optional": [
        "application_services",
        "development_standards"
      ]
    }
  },

  "field_mappings": {
    "project_details.account_id": {
      "description": "AWS Account ID",
      "example": "123456789012",
      "type": "string",
      "source": "metadata.aws_account or sections.project_details.aws_account"
    },
    "project_details.region": {
      "description": "Primary AWS region",
      "example": "us-east-1",
      "type": "string"
    },
    "project_details.cluster_name": {
      "description": "EKS cluster name",
      "example": "non-prod-rnd-eks",
      "type": "string"
    },
    "terraform_infrastructure.provider_credentials.aws": {
      "description": "AWS authentication configuration",
      "type": "object",
      "fields": {
        "account_id": "AWS account ID",
        "region": "Default region",
        "profile": "AWS CLI profile name (optional)"
      }
    },
    "cluster_details.irsa_enabled": {
      "description": "Whether EKS IAM Roles for Service Accounts (IRSA) is enabled",
      "type": "boolean",
      "default": true
    }
  }
}